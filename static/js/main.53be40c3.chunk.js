(this["webpackJsonpmuda-front"]=this["webpackJsonpmuda-front"]||[]).push([[0],{142:function(e,t,n){"use strict";n.r(t);var a,o=n(1),r=n.n(o),c=n(54),i=n.n(c),s=(n(60),n(2)),u=(n(61),n(0)),b={width:"100%",backgroundColor:"#ADF7AE",color:"#243324",fontFamily:"Source Code Pro, monospace",fontSize:22,padding:10},d=function(){return Object(u.jsx)("div",{style:b,children:"TyPiano"})},j=n(5),f=n(19),l=n.n(f),O=n(31),h=n.n(O),p=n(32),x=n(55);function m(e,t){if(a&&!a.ended&&(a.pause(),a.currentTime=0),!(e>=96)){for(var n=11025,o=new Uint8Array(Math.floor(n*t)+100),r="524946460000000057415645666D74201000000001000100112B0000112B0000010008006461746100000000",c=0;c<r.length/2;)o[c]=parseInt(r.substr(2*c,2),16),c+=1;for(var i=Math.floor(e/12),s=6.28/(n/([4180,4428,4708,4968,5264,5592,5884,6300,6676,6988,7476,7848][e%12]/(1<<7-i))),u=0;u<Math.floor(n*t);u++)o[c++]=Math.floor(127*Math.sin(s*u))+128;v(o,4,c-8),v(o,24,n),v(o,40,c-44);for(var b="",d=0;d<c;d++)b+=String.fromCharCode(o[d]);(a=new Audio("data:audio/wav;base64,"+btoa(b))).play()}}function v(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}var w=function(e,t,n){"do"===e?m(48+12*t,n):"#do"==e?m(49+12*t,n):"re"===e?m(50+12*t,n):"#re"===e?m(51+12*t,n):"mi"===e?m(52+12*t,n):"fa"===e?m(53+12*t,n):"#fa"===e?m(54+12*t,n):"so"===e?m(55+12*t,n):"#so"===e?m(56+12*t,n):"ra"===e?m(57+12*t,n):"#ra"===e?m(58+12*t,n):"shi"===e&&m(59+12*t,n)};var g=function(e,t){var n="";return"do"===e?n+="C":"#do"===e?n+="^C":"re"===e?n+="D":"#re"===e?n+="^D":"mi"===e?n+="E":"fa"===e?n+="F":"#fa"===e?n+="^F":"so"===e?n+="G":"#so"===e?n+="^G":"ra"===e?n+="A":"#ra"===e?n+="^A":"shi"===e?n+="B":" "===e&&(n+="z"),1==t?n=n.toLowerCase():t>1?(n=n.toLowerCase(),n+="'".repeat(t)):t<0&&(n+=",".repeat(-t)),n},y=.5,k=function(){var e=Object(o.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),c=Object(s.a)(r,2),i=(c[0],c[1]),u=Object(o.useState)([]),b=Object(s.a)(u,2),d=b[0],j=b[1],f=Object(o.useState)([]),l=Object(s.a)(f,2),O=l[0],m=l[1],v="",k="",F=["do","re","mi","fa","so","ra","shi","#do","#re","#fa","#so","#ra"," "],C=function(e){return new Promise((function(t,n){setTimeout(t,1e3*e)}))};return Object(o.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(x.a)(h.a.mark((function e(t){var n,o,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(n=t.keyCode)){e.next=58;break}o=0,r=0;case 4:if(!(o+1<v.length)){e.next=20;break}if(","!==v[o]){e.next=11;break}return r-=1,o+=1,e.abrupt("continue",4);case 11:if("."!==v[o]){e.next=15;break}return r+=1,o+=1,e.abrupt("continue",4);case 15:"sh"===(c=v.substr(o,2))||"#"===c[0]?(c+=v[o+2],o+=3):" "===c[0]?(o+=1,c=" "):o+=2,F.includes(c)?(console.log(r),k+=g(c,r),r=0):o-=1,e.next=4;break;case 20:j((function(e){return[].concat(Object(p.a)(e),[v])})),m((function(e){return[].concat(Object(p.a)(e),[k])})),a(""),i(""),o=0,r=0;case 26:if(!(o+1<v.length)){e.next=54;break}if(","!==v[o]){e.next=33;break}return r-=1,o+=1,e.abrupt("continue",26);case 33:if("."!==v[o]){e.next=37;break}return r+=1,o+=1,e.abrupt("continue",26);case 37:if("sh"===(c=v.substr(o,2))||"#"===c[0]?(c+=v[o+2],o+=3):" "===c[0]?(o+=1,c=" "):o+=2,!F.includes(c)){e.next=51;break}if(" "!==c){e.next=45;break}return e.next=43,C(.25);case 43:e.next=49;break;case 45:return w(c,r,y),r=0,e.next=49,C(y);case 49:e.next=52;break;case 51:o-=1;case 52:e.next=26;break;case 54:v="",k="",e.next=59;break;case 58:68===n?a(v+="d"):82===n?a(v+="r"):77===n?a(v+="m"):70===n?a(v+="f"):83===n?a(v+="s"):72===n?a(v+="h"):79===n?a(v+="o"):69===n?a(v+="e"):73===n?a(v+="i"):65===n?a(v+="a"):51===n?a(v+="#"):190===n?a(v+="."):188===n?a(v+=","):32===n&&a(v+=" ");case 59:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[d,O]),[n,d,O]},F=(n(53),{backgroundColor:"#041344",color:"#FFFFFF",height:"30px",paddingRight:20,paddingLeft:20,paddingTop:10,paddingBottom:5,overflowY:"scroll"}),C=Object(j.a)(Object(j.a)({},F),{},{animationName:"slide-in",animationDuration:"2s",animationFillMode:"forwards"}),S=Object(j.a)(Object(j.a)({},F),{},{animationName:"slide-out",animationDuration:"2s",animationFillMode:"forwards"}),L=function(e){var t=e.command,n=e.abc,a=e.i,o="command"+String(a),r="score"+String(a);return l.a.renderAbc(r,n),Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:["$ ",t]},o),Object(u.jsx)("div",{id:r},r)]})},E=function(e){var t=e.inConsole;return Object(u.jsx)("div",{style:F,children:!t&&"\u30b3\u30f3\u30bd\u30fc\u30eb\u30e2\u30fc\u30c9\u3078"})},M=function(e){for(var t=e.doRemove,n=k(),a=Object(s.a)(n,3),o=a[0],r=a[1],c=a[2],i=[],b=0;b<c.length;b++)i.push(Object(u.jsx)(L,{command:r[b],abc:c[b],i:b}));return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{style:t?S:C,children:[i,Object(u.jsxs)("p",{children:["$ ",o]})]},"c")})},A=function(){var e=Object(o.useState)("none"),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!1),c=Object(s.a)(r,2),i=c[0],u=c[1],b=Object(o.useState)("none"),d=Object(s.a)(b,2),j=d[0],f=d[1],l=Object(o.useState)(0),O=Object(s.a)(l,2),h=O[0],p=O[1],x=Object(o.useState)(0),m=Object(s.a)(x,2),v=m[0],g=m[1];return Object(o.useEffect)((function(){function e(e){var t=e.keyCode;f("none");var o="";51==t?u(!0):188==t?p(h-1):190==t?p(h+1):68===t?a(i?"#d":"d"):82===t?a(i?"#r":"r"):77===t?a("m"):70===t?a(i?"#f":"f"):83===t?a(i?"#s":"s"):72===t&&"s"===n?a("sh"):79===t&&"d"===n?(g(h),p(0),i?(f("#do"),o="#do",u(!1)):(f("do"),o="do"),w(o,v,y),a("none")):79===t&&"s"===n?(g(h),p(0),i?(f("#so"),o="#so",u(!1)):(f("so"),o="so"),w(o,v,y),a("none")):69===t&&"r"===n?(g(h),p(0),i?(f("#re"),o="#re",u(!1)):(f("re"),o="re"),w(o,v,y),a("none")):73===t&&"m"===n?(g(h),p(0),u(!1),f("mi"),w(o="mi",v,y),a("none")):73===t&&"sh"===n?(g(h),p(0),u(!1),f("shi"),w(o="shi",v,y),a("none")):65===t&&"f"===n?(g(h),p(0),i?(f("#fa"),o="#fa",u(!1)):(f("fa"),o="fa"),w(o,v,y),a("none")):65===t&&"r"===n?(g(h),p(0),i?(f("#ra"),o="#ra",u(!1)):(f("ra"),o="ra"),w(o,v,y),a("none")):(a("none"),p(0))}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),[j,v]},D=function(){var e=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}},t=Object(o.useState)(e()),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){var t=function(){r(e())};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),a},T={height:300,width:64,backgroundColor:"#F5FCFF",border:"1px solid black"},B=Object(j.a)(Object(j.a)({},T),{},{backgroundColor:"#adefde"}),P={height:150,width:32,backgroundColor:"black",border:"1px solid black",marginLeft:-17,marginRight:-17,zIndex:1},R=Object(j.a)(Object(j.a)({},P),{},{backgroundColor:"#aaabcb"}),z={position:"fixed",bottom:0,transformOrigin:"bottom",animationName:"to-long",animationDuration:"2s",animationFillMode:"forwards"},I={position:"fixed",bottom:0,transformOrigin:"bottom",animationName:"to-short",animationDuration:"2s",animationFillMode:"forwards"},N=function(e){var t=e.nowplay;return Object(u.jsx)("div",{style:t?B:T})},G=function(e){var t=e.nowplay;return Object(u.jsx)("div",{style:t?R:P})},J=function(e){for(var t=e.inPiano,n=D().width/64,a=[],o=0;o<n;o++)switch(o%7){case 0:case 1:a.push(Object(u.jsx)(N,{nowplay:!1},o)),a.push(Object(u.jsx)(G,{nowplay:!1},o+.5));break;case 2:a.push(Object(u.jsx)(N,{nowplay:!1},o));break;case 3:case 4:case 5:a.push(Object(u.jsx)(N,{nowplay:!1},o)),a.push(Object(u.jsx)(G,{nowplay:!1},o+.5));break;case 6:a.push(Object(u.jsx)(N,{nowplay:!1},o))}return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{display:"flex",transform:"scaleY(0.2)",position:"fixed",bottom:-121,zIndex:-1},children:a}),!t&&Object(u.jsx)("div",{style:{position:"fixed",bottom:0,marginLeft:20,marginBottom:7,paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10,backgroundColor:"#FFFFFF",boxShadow:"0 0 10px 10px white"},children:"\u30d4\u30a2\u30ce\u30e2\u30fc\u30c9\u3078"})]})},Y=function(e){for(var t=e.doRemove,n=Object(o.useState)(""),a=Object(s.a)(n,2),r=a[0],c=a[1],i=D().width/64,b=A(),d=Object(s.a)(b,2),j=d[0],f=d[1],O=[],h=7*Math.floor(i/7/2),p=h+7,x=0;x<i;x++){var m=x>=h&&x<p;switch(x%7){case 0:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"do"===j},x)),O.push(Object(u.jsx)(G,{nowplay:!(!m||t)&&"#do"===j},x+.5));break;case 1:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"re"===j},x)),O.push(Object(u.jsx)(G,{nowplay:!(!m||t)&&"#re"===j},x+.5));break;case 2:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"mi"===j},x));break;case 3:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"fa"===j},x)),O.push(Object(u.jsx)(G,{nowplay:!(!m||t)&&"#fa"===j},x+.5));break;case 4:O.push(Object(u.jsx)(N,{nowplay:!!m&&"so"===j},x)),O.push(Object(u.jsx)(G,{nowplay:!(!m||t)&&"#so"===j},x+.5));break;case 5:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"ra"===j},x)),O.push(Object(u.jsx)(G,{nowplay:!(!m||t)&&"#ra"===j},x+.5));break;case 6:O.push(Object(u.jsx)(N,{nowplay:!(!m||t)&&"shi"===j},x))}}return Object(o.useEffect)((function(){var e=g(j,f);c((function(t){return t+e}))}),[j]),l.a.renderAbc("abc",r),Object(u.jsxs)("div",{style:t?I:z,children:[Object(u.jsx)("div",{id:"abc"}),Object(u.jsx)("div",{style:{display:"flex"},children:O})]})};var $=function(){var e=Object(o.useState)(!0),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!0),c=Object(s.a)(r,2),i=c[0],b=c[1],j=Object(o.useState)(!1),f=Object(s.a)(j,2),l=f[0],O=f[1],h=Object(o.useState)(!1),p=Object(s.a)(h,2),x=p[0],m=p[1];return Object(u.jsxs)("div",{className:"App",onClick:function(){n?(a(!1),b(!1),O(!0),setTimeout((function(){m(!0)}),2e3)):(m(!1),a(!0),O(!1),setTimeout((function(){b(!0)}),2e3))},children:[Object(u.jsx)(d,{}),!x&&Object(u.jsx)(M,{doRemove:!n}),Object(u.jsx)(E,{inConsole:i}),!i&&Object(u.jsx)(Y,{doRemove:!l}),Object(u.jsx)(J,{inPiano:x})]})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,143)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root")),H()},53:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.53be40c3.chunk.js.map