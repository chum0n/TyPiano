(this["webpackJsonpmuda-front"]=this["webpackJsonpmuda-front"]||[]).push([[0],{142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t);var a,o=n(1),r=n.n(o),i=n(54),c=n.n(i),s=(n(60),n(2)),u=(n(61),n(0)),b={display:"flex",arignItems:"center",width:"100%",height:40,backgroundColor:"#C6F7C7",color:"#243324",fontFamily:"Alex Brush, cursive",fontSize:22,padding:10},d=function(e){var t=e.toTop;return Object(u.jsxs)("div",{style:b,children:[Object(u.jsx)("img",{src:"/icon.png",alt:"",style:{height:35,cursor:"pointer"},onClick:t}),Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:t,children:"TyPiano"})]})},l=n(5),j=n(19),f=n.n(j),h=n(31),p=n.n(h),O=n(32),x=n(55);function m(e,t){if(a&&!a.ended&&(a.pause(),a.currentTime=0),!(e>=96)){for(var n=11025,o=new Uint8Array(Math.floor(n*t)+100),r="524946460000000057415645666D74201000000001000100112B0000112B0000010008006461746100000000",i=0;i<r.length/2;)o[i]=parseInt(r.substr(2*i,2),16),i+=1;for(var c=Math.floor(e/12),s=6.28/(n/([4180,4428,4708,4968,5264,5592,5884,6300,6676,6988,7476,7848][e%12]/(1<<7-c))),u=0;u<Math.floor(n*t);u++)o[i++]=Math.floor(127*Math.sin(s*u))+128;g(o,4,i-8),g(o,24,n),g(o,40,i-44);for(var b="",d=0;d<i;d++)b+=String.fromCharCode(o[d]);(a=new Audio("data:audio/wav;base64,"+btoa(b))).play()}}function g(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}var v=function(e,t,n){"do"===e?m(48+12*t,n):"#do"==e?m(49+12*t,n):"re"===e?m(50+12*t,n):"#re"===e?m(51+12*t,n):"mi"===e?m(52+12*t,n):"fa"===e?m(53+12*t,n):"#fa"===e?m(54+12*t,n):"so"===e?m(55+12*t,n):"#so"===e?m(56+12*t,n):"ra"===e?m(57+12*t,n):"#ra"===e?m(58+12*t,n):"shi"===e&&m(59+12*t,n)};var w=function(e,t,n){var a="";return"do"===e?a+="C":"#do"===e?a+="^C":"re"===e?a+="D":"#re"===e?a+="^D":"mi"===e?a+="E":"fa"===e?a+="F":"#fa"===e?a+="^F":"so"===e?a+="G":"#so"===e?a+="^G":"ra"===e?a+="A":"#ra"===e?a+="^A":"shi"===e?a+="B":" "===e?a+="z":e[1],1==t?a=a.toLowerCase():t>1?(a=a.toLowerCase(),a+="'".repeat(t)):t<0&&(a+=",".repeat(-t)),n>0?a+=Math.pow(2,n).toString():n<0&&(a+="1/"+Math.pow(2,-1*n).toString()),console.log(a),a},k=.5,y=function(){var e=Object(o.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(""),i=Object(s.a)(r,2),c=(i[0],i[1]),u=Object(o.useState)([]),b=Object(s.a)(u,2),d=b[0],l=b[1],j=Object(o.useState)([]),f=Object(s.a)(j,2),h=f[0],m=f[1],g="",y="",C=["do","re","mi","fa","so","ra","shi","#do","#re","#fa","#so","#ra"," "],F=function(e){return new Promise((function(t,n){setTimeout(t,1e3*e)}))};return Object(o.useEffect)((function(){function e(e){return t.apply(this,arguments)}function t(){return(t=Object(x.a)(p.a.mark((function e(t){var n,o,r,i,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13!==(n=t.keyCode)){e.next=86;break}o=0,r=0,i=0;case 5:if(!(o+1<g.length)){e.next=33;break}if(","!==g[o]){e.next=12;break}return r-=1,o+=1,e.abrupt("continue",5);case 12:if("."!==g[o]){e.next=18;break}return r+=1,o+=1,e.abrupt("continue",5);case 18:if("+"!==g[o]){e.next=24;break}return o+=1,i+=1,e.abrupt("continue",5);case 24:if("-"!==g[o]){e.next=28;break}return o+=1,i-=1,e.abrupt("continue",5);case 28:"sh"===(s=g.substr(o,2))||"#"===s[0]?(s+=g[o+2],o+=3):" "===s[0]?(o+=1,s=" "):o+=2,C.includes(s)?(y+=w(s,r,i),r=0,i=0):o-=1,e.next=5;break;case 33:l((function(e){return[].concat(Object(O.a)(e),[g])})),m((function(e){return[].concat(Object(O.a)(e),[y])})),a(""),c(""),o=0,r=0;case 39:if(!(o+1<g.length)){e.next=82;break}if(","!==g[o]){e.next=46;break}return r-=1,o+=1,e.abrupt("continue",39);case 46:if("."!==g[o]){e.next=52;break}return r+=1,o+=1,e.abrupt("continue",39);case 52:if("+"!==g[o]){e.next=58;break}return o+=1,i+=1,e.abrupt("continue",39);case 58:if("-"!==g[o]){e.next=62;break}return o+=1,i-=1,e.abrupt("continue",39);case 62:if("sh"===(s=g.substr(o,2))||"#"===s[0]?(s+=g[o+2],o+=3):" "===s[0]?(o+=1,s=" "):o+=2,!C.includes(s)){e.next=79;break}if(" "!==s){e.next=70;break}return e.next=68,F(.25);case 68:e.next=77;break;case 70:return u=k,i>0?u*=2*i:i<0&&(u/=-2*i),v(s,r,u),r=0,i=0,e.next=77,F(u);case 77:e.next=80;break;case 79:o-=1;case 80:e.next=39;break;case 82:g="",y="",e.next=87;break;case 86:68===n?a(g+="d"):82===n?a(g+="r"):77===n?a(g+="m"):70===n?a(g+="f"):83===n?a(g+="s"):72===n?a(g+="h"):79===n?a(g+="o"):69===n?a(g+="e"):73===n?a(g+="i"):65===n?a(g+="a"):51===n?a(g+="#"):190===n?a(g+="."):188===n?a(g+=","):32===n?a(g+=" "):187===n?a(g+="+"):189===n?a(g+="-"):8!==n&&46!==n||(g=g.substring(0,g.length-1),a(g));case 87:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[d,h]),[n,d,h]},C=(n(53),n(142),{backgroundColor:"#041344",color:"#FFFFFF",height:"30px",paddingRight:20,paddingLeft:20,paddingTop:10,paddingBottom:5,overflowY:"scroll"}),F=Object(l.a)(Object(l.a)({},C),{},{animationName:"slide-in",animationDuration:"2s",animationFillMode:"forwards"}),S=Object(l.a)(Object(l.a)({},C),{},{animationName:"slide-out",animationDuration:"2s",animationFillMode:"forwards"}),L={animationName:"flash",animationDuration:"1s",animationIterationCount:"infinite"},M=function(e){var t=e.command,n=e.abc,a=e.i,o="command"+String(a),r="score"+String(a);return f.a.renderAbc(r,n),Object(u.jsxs)("div",{children:[Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{color:"#09f80d"},children:"[admin@typiano]$"})," ",t]},o),Object(u.jsx)("div",{id:r},r)]})},E=function(e){var t=e.inConsole;return Object(u.jsx)("div",{style:C,children:!t&&"\u30b3\u30f3\u30bd\u30fc\u30eb\u30e2\u30fc\u30c9\u3078"})},I=function(e){for(var t=e.doRemove,n=y(),a=Object(s.a)(n,3),r=a[0],i=a[1],c=a[2],b=Object(o.useRef)(null),d=[],l=0;l<c.length;l++)d.push(Object(u.jsx)(M,{command:i[l],abc:c[l],i:l}));return Object(o.useEffect)((function(){var e;null===b||void 0===b||null===(e=b.current)||void 0===e||e.scrollIntoView(!1)}),[d]),Object(u.jsx)("div",{children:Object(u.jsxs)("div",{style:t?S:F,children:[d,Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{style:{color:"#09f80d"},children:"[admin@typiano]$"})," ",r,Object(u.jsx)("span",{style:L,children:"|"})]}),Object(u.jsx)("div",{ref:b})]},"c")})},T=0,z=0,A=function(){var e=Object(o.useState)("none"),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!1),i=Object(s.a)(r,2),c=i[0],u=i[1],b=Object(o.useState)("none"),d=Object(s.a)(b,2),l=d[0],j=d[1],f=Object(o.useState)(0),h=Object(s.a)(f,2),p=(h[0],h[1]),O=Object(o.useState)(0),x=Object(s.a)(O,2),m=x[0],g=x[1];return Object(o.useEffect)((function(){function e(e){var t=e.keyCode;j("none");var o="";51===t?u(!0):188===t?p(T-=1):190===t?p(T+=1):68===t?a(c?"#d":"d"):82===t?a(c?"#r":"r"):77===t?a("m"):70===t?a(c?"#f":"f"):83===t?a(c?"#s":"s"):72===t&&"s"===n?a("sh"):79===t&&"d"===n?(g(z=T),p(T=0),c?(j("#do"),o="#do",u(!1)):(j("do"),o="do"),v(o,z,k),a("none")):79===t&&"s"===n?(g(z=T),p(T=0),c?(j("#so"),o="#so",u(!1)):(j("so"),o="so"),v(o,z,k),a("none")):69===t&&"r"===n?(g(z=T),p(T=0),c?(j("#re"),o="#re",u(!1)):(j("re"),o="re"),v(o,z,k),a("none")):73===t&&"m"===n?(g(z=T),p(T=0),u(!1),j("mi"),v(o="mi",z,k),a("none")):73===t&&"sh"===n?(g(z=T),p(T=0),u(!1),j("shi"),v(o="shi",z,k),a("none")):65===t&&"f"===n?(g(z=T),p(T=0),c?(j("#fa"),o="#fa",u(!1)):(j("fa"),o="fa"),v(o,z,k),a("none")):65===t&&"r"===n?(g(z=T),p(T=0),c?(j("#ra"),o="#ra",u(!1)):(j("ra"),o="ra"),v(o,z,k),a("none")):(a("none"),p(T=0))}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[n]),[l,m]},N=function(){var e=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}},t=Object(o.useState)(e()),n=Object(s.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){var t=function(){r(e())};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),a},B={height:300,width:64,backgroundColor:"#F5FCFF",border:"1px solid black"},D=Object(l.a)(Object(l.a)({},B),{},{backgroundColor:"#adefde"}),R={height:150,width:32,backgroundColor:"black",border:"1px solid black",marginLeft:-17,marginRight:-17,zIndex:1},P=Object(l.a)(Object(l.a)({},R),{},{backgroundColor:"#aaabcb"}),G={height:150,width:16,backgroundColor:"black",border:"1px solid black",marginLeft:-17,marginRight:0,zIndex:1},J=Object(l.a)(Object(l.a)({},G),{},{backgroundColor:"#aaabcb"}),Y={position:"fixed",bottom:0,transformOrigin:"bottom",animationName:"to-long",animationDuration:"2s",animationFillMode:"forwards"},$={position:"fixed",bottom:0,transformOrigin:"bottom",animationName:"to-short",animationDuration:"2s",animationFillMode:"forwards"},H=function(e){var t=e.nowplay;return Object(u.jsx)("div",{style:t?D:B})},U=function(e){var t=e.nowplay,n=e.last,a=n?G:R,o=n?J:P;return Object(u.jsx)("div",{style:t?o:a})},V=function(e){for(var t=e.inPiano,n=N(),a=Math.floor(n.width/65),o=[],r=0;r<a-1;r++)switch(r%7){case 0:case 1:o.push(Object(u.jsx)(H,{nowplay:!1},r)),o.push(Object(u.jsx)(U,{last:r===a-1,nowplay:!1},r+.5));break;case 2:o.push(Object(u.jsx)(H,{nowplay:!1},r));break;case 3:case 4:case 5:o.push(Object(u.jsx)(H,{nowplay:!1},r)),o.push(Object(u.jsx)(U,{last:r===a-1,nowplay:!1},r+.5));break;case 6:o.push(Object(u.jsx)(H,{nowplay:!1},r))}return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:{display:"flex",transform:"scaleY(0.2)",position:"fixed",bottom:-121,zIndex:-1},children:o}),!t&&Object(u.jsx)("div",{style:{position:"fixed",bottom:0,marginLeft:20,marginBottom:7,paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10,backgroundColor:"#FFFFFF",boxShadow:"0 0 10px 10px white"},children:"\u30d4\u30a2\u30ce\u30e2\u30fc\u30c9\u3078"})]})},W=function(e){for(var t=e.doRemove,n=Object(o.useState)(""),a=Object(s.a)(n,2),r=a[0],i=a[1],c=N(),b=Math.floor(c.width/65),d=A(),l=Object(s.a)(d,2),j=l[0],h=l[1],p=[],O=7*Math.floor(b/7/2),x=O+7,m=0;m<b;m++){var g=m>=O&&m<x;switch(m%7){case 0:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"do"===j},m)),p.push(Object(u.jsx)(U,{last:m===b-1,nowplay:!(!g||t)&&"#do"===j},m+.5));break;case 1:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"re"===j},m)),p.push(Object(u.jsx)(U,{last:m===b-1,nowplay:!(!g||t)&&"#re"===j},m+.5));break;case 2:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"mi"===j},m));break;case 3:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"fa"===j},m)),p.push(Object(u.jsx)(U,{last:m===b-1,nowplay:!(!g||t)&&"#fa"===j},m+.5));break;case 4:p.push(Object(u.jsx)(H,{nowplay:!!g&&"so"===j},m)),p.push(Object(u.jsx)(U,{last:m===b-1,nowplay:!(!g||t)&&"#so"===j},m+.5));break;case 5:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"ra"===j},m)),p.push(Object(u.jsx)(U,{last:m===b-1,nowplay:!(!g||t)&&"#ra"===j},m+.5));break;case 6:p.push(Object(u.jsx)(H,{nowplay:!(!g||t)&&"shi"===j},m))}}return Object(o.useEffect)((function(){var e=w(j,h,0);i((function(t){return t+e}))}),[j]),f.a.renderAbc("abc",r),Object(u.jsxs)("div",{style:t?$:Y,children:[Object(u.jsxs)("div",{className:"score-stand",style:{position:"relative"},children:[Object(u.jsx)("div",{className:"score-wrapper",style:{position:"absolute",top:-60,left:"10%",width:"80%",height:200,padding:10,border:"1px solid black",backgroundColor:"white"},children:Object(u.jsx)("div",{id:"abc",style:{margin:"30px 0"}})}),Object(u.jsx)("div",{style:{backgroundColor:"black",marginLeft:"5%",width:"90%",height:120,zIndex:-1}})]}),Object(u.jsx)("div",{style:{backgroundColor:"black",height:100,width:"100%"}}),Object(u.jsx)("div",{style:{display:"flex"},children:p})]})},q=(n(143),n(144),n.p+"static/media/typiano-top.f0c827b4.png"),K={position:"absolute",left:0,top:0,width:"100%",height:"100%",backgroundImage:"url(".concat(q,")"),backgroundSize:"cover"},Q={display:"flex",flexDirection:"column",justifyContent:"center",position:"absolute",left:0,top:0,width:"100%",height:"100%",background:"rgba(0,0,0, 0.2)",color:"#FFFFFF",fontFamily:"Alex Brush, cursive",fontSize:66,zIndex:5,varticalAlign:"center",textAlign:"center"},X=function(e){var t=e.piano,n=e.console;return Object(u.jsx)("div",{style:K,children:Object(u.jsxs)("div",{style:Q,children:[Object(u.jsx)("h1",{children:"TyPiano"}),Object(u.jsxs)("div",{className:"iota",children:[Object(u.jsx)("button",{className:"btn",onClick:function(){return n()},children:Object(u.jsx)("span",{children:"\u30b3\u30f3\u30bd\u30fc\u30eb\u30e2\u30fc\u30c9"})}),Object(u.jsx)("button",{className:"btn",onClick:function(){return t()},children:"\u30d4\u30a2\u30ce\u30e2\u30fc\u30c9"})]})]})})};var Z=function(){var e=Object(o.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(o.useState)(!0),i=Object(s.a)(r,2),c=i[0],b=i[1],l=Object(o.useState)(!1),j=Object(s.a)(l,2),f=j[0],h=j[1],p=Object(o.useState)(!0),O=Object(s.a)(p,2),x=O[0],m=O[1],g=Object(o.useState)(!1),v=Object(s.a)(g,2),w=v[0],k=v[1];function y(){a(!0),k(!1),b(!0),m(!1),setTimeout((function(){h(!0)}),2e3)}function C(){a(!0),b(!1),h(!1),m(!0),setTimeout((function(){k(!0)}),2e3)}return Object(u.jsxs)("div",{className:"App",children:[!n&&Object(u.jsx)(X,{piano:C,console:y}),n&&Object(u.jsx)(d,{toTop:function(){a(!1)}}),n&&Object(u.jsxs)("div",{onClick:function(){c?C():y()},children:[!w&&Object(u.jsx)(I,{doRemove:!c}),Object(u.jsx)(E,{inConsole:f}),!f&&Object(u.jsx)(W,{doRemove:!x}),Object(u.jsx)(V,{inPiano:w})]})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),r(e),i(e)}))};c.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Z,{})}),document.getElementById("root")),_()},53:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){}},[[145,1,2]]]);
//# sourceMappingURL=main.3692700c.chunk.js.map